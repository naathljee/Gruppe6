<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HistorieStor1</title>
    <link rel="stylesheet" href="styles.css" >
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
    <script src="DarkMode.js" defer></script>
</head>
<body class="container-xlstory">
    <header class="head-xlstory">
        <a href="index.html"><img src="img/ERA.png" alt="ERA logo" class="xlstory-img"></a>
    </header>
    
    <main class="xlstory-main">

      
        <div class="xlstory-startcontent-background-image" id="background-image"></div>
        <div class="xlstory-startcontent">
            <h1>Når ansvarsfraskrivelse forurenser.</h1>
         </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p>Ifølge båtlivsundersøkelsen fra 2023 er det 1.067.000 båter i Norge.</p>
            </div>
       
            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p> Miljødirektoratet har opplyst at fra 2017 og fram til i dag, så blir det årlig innlevert mellom 10 000 og 14 000 båter lovlig til avfallsanlegget. </p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p>Mange følger reglene og tar ansvar.</p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p>Men, i følge det kongelige norske båtforbundet er det estimert at rundt 5000 fritidsbåter blir ulovlig senket hvert år.</p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-imagecollage" id="imagecollagexl">
                <img src="img/XL/collage/image1.jpg" alt="bilde 1" class="visible">
            </div>

            <div style="height: 6000px;"></div>

            <div class="xlstory-starttext">
         <p>Dette er 0,1 % av alle vrakbåtene i Norge. Tenk deg resten.</p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-parttext">
                <h1>Del 2</h1>
                <p>I kamp mot vrakene.</p>
                   </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext2">
                <p>Oslofjordens Friluftsråd er en organisasjon som henter båtvrak.</p> 
                <div class="XLstoryvideo" id="background-image">
                  <video class="XLstoryvideo-vid" id="background-video" muted autoplay loop>
                    <source src="img/XL/Oslofjordens-Friluftsråd-lekter.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              



            

               <div style="height: 600px;"></div>

               <div class="XLstorycards">
                <h1 id="XLstorycardheader">Bjørn Heidenstrøm jobber i Oslofjordens Friluftsråd.</h1>
                <div style="height: 50px;"></div>
                <div class="XLstorycardcontent">
                  <p class="XLstoryquestions"></p>
                  <p class="XLstoryanswers"></p>
                </div>
              </div>

              <div style="height: 4000px;"></div>

              <div class="XLstorycards2">
                <div class="XLstorycardcontent2">
                    <p></p>
                </div>
               </div>
              
              
              
              

              
              <div style="height: 3500px;"></div>


              <div style="height: 3500px;"></div> <!--midlertidig-->


              <div class="xlstory-parttext">
                <h1>Del 3</h1>
                <p>Når båtene synker, synker også håpet.</p>
                   </div>

                   <div style="height: 800px;"></div>
    </main>

    
    <script>

 //Gjør så ERA logoen forsvinner etter 35 pixler scroling
let lastScrollTop = 0;
    window.addEventListener('scroll', function() {
        let header = document.querySelector('.head-xlstory');
        let st = window.pageYOffset || document.documentElement.scrollTop;
        if (st > lastScrollTop && st > 35) {
            header.style.top = '-150px';
        } else {
            header.style.top = '0';
        }
        lastScrollTop = st <= 0 ? 0 : st;
    });

    //Endre bakgrunnsbilde i starten av story`n
    window.addEventListener('scroll', function () {
    const backgroundImage = document.getElementById('background-image');
    const backgroundVideo = document.getElementById('background-video');

    if (window.scrollY > 24700) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside4.jpg')";
        backgroundVideo.style.display = 'none';
    } else if (window.scrollY > 20700) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside3.jpg')";
        backgroundVideo.style.display = 'none';
    }else if (window.scrollY > 19400) {
        backgroundImage.style.backgroundImage = "url('img/XL/bjorn2.jpg')";
        backgroundImage.style.backgroundPosition = "center left"; 
        backgroundImage.style.backgroundSize = "cover"; 
        backgroundVideo.style.display = 'none';
    } else if (window.scrollY > 18800) {
        backgroundImage.style.backgroundImage = "url('img/XL/bjorn1.jpg')";
        backgroundImage.style.backgroundPosition = "center right"; 
        backgroundImage.style.backgroundSize = "cover"; 
        backgroundVideo.style.display = 'none';
    } else if (window.scrollY > 18800) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside3.jpg')";
        backgroundVideo.style.display = 'none';
    } else if (window.scrollY > 16300) {
        backgroundImage.style.backgroundImage = 'none';
        backgroundVideo.style.display = 'block';
    }  else if (window.scrollY > 14900) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside3.jpg')";
        backgroundVideo.style.display = 'none';
    } else if (window.scrollY > 250) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside2.jpg')";
        backgroundVideo.style.display = 'none';
    } else {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside.jpg')";
        backgroundVideo.style.display = 'none';
    }
});





//Gjør så bilde collagen vises etter 7100px
const imageContainer = document.getElementById('imagecollagexl');
const imagePaths = [
    'img/XL/collage/image1.jpg',
    'img/XL/collage/image2.jpg',
    'img/XL/collage/image3.jpg',
    'img/XL/collage/image4.jpg',
    'img/XL/collage/image5.jpg',
    'img/XL/collage/image6.jpg',
    'img/XL/collage/image7.jpg',
    'img/XL/collage/image8.jpg',
    'img/XL/collage/image9.jpg',
    'img/XL/collage/image10.jpg',
    'img/XL/collage/image11.jpg',
    'img/XL/collage/image12.jpg',
    'img/XL/collage/image13.jpg',
    'img/XL/collage/image14.jpg',
    'img/XL/collage/image15.jpg',
    'img/XL/collage/image16.jpg',
    'img/XL/collage/image17.jpg',
    'img/XL/collage/image18.jpg',
    'img/XL/collage/image19.jpg',
    'img/XL/collage/image20.jpg',
    'img/XL/collage/image21.jpg',
    'img/XL/collage/image22.jpg',
    'img/XL/collage/image23.jpg',
    'img/XL/collage/image24.jpg',
];

let startScrollPosition = 7100; 
const threshold = 200; 
const fadeOutBuffer = 1000; 



const updateStartScrollPosition = () => {
    if (window.innerWidth < 450) {
        startScrollPosition = 8100; //Blir ikke brukt, gammel kode som skulle endre startscrolposition for koden fra 7100 for datamaskiner til 8100 for mobiler forgrunna media queries. 
        console.log(`Adjusted for small screen width: ${window.innerWidth}px, new startScrollPosition: ${startScrollPosition}`);
    } else {
        startScrollPosition = 7100; 
        console.log(`Screen width is sufficient: ${window.innerWidth}px, startScrollPosition remains: ${startScrollPosition}`);
    }
};


updateStartScrollPosition();


window.addEventListener('resize', updateStartScrollPosition);

let loadedImages = [];


for (let i = 0; i < imagePaths.length; i++) {
    const img = new Image();
    img.src = imagePaths[i];
    loadedImages.push(img);
}

window.addEventListener('scroll', () => {
    const scrollPosition = window.scrollY || document.documentElement.scrollTop;
    console.log(`Scroll Position: ${scrollPosition}`);
    console.log(`Start Scroll Position: ${startScrollPosition}`);

    if (scrollPosition >= startScrollPosition) {
        imageContainer.style.opacity = 1; 

        const imagesToShow = Math.min(Math.floor((scrollPosition - startScrollPosition) / threshold) + 1, imagePaths.length);
        console.log(`Images to Show: ${imagesToShow}`);

        imageContainer.innerHTML = '';
        for (let i = 0; i < imagesToShow; i++) {
            const img = loadedImages[i].cloneNode();
            img.classList.add('visible');
            imageContainer.appendChild(img);
        }

        
        switch (true) {
            case (imagesToShow === 1):
                imageContainer.style.gridTemplateColumns = '1fr';
                imageContainer.style.gridTemplateRows = '1fr';
                break;
            case (imagesToShow <= 3):
                imageContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';
                imageContainer.style.gridTemplateRows = '1fr';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh)';
                });
                break;
            case (imagesToShow <= 6):
                imageContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(2, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 2)';
                });
                break;
            case (imagesToShow <= 9):
                imageContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 12):
                imageContainer.style.gridTemplateColumns = 'repeat(4, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 15):
                imageContainer.style.gridTemplateColumns = 'repeat(5, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 18):
                imageContainer.style.gridTemplateColumns = 'repeat(6, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 21):
                imageContainer.style.gridTemplateColumns = 'repeat(7, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 24):
                imageContainer.style.gridTemplateColumns = 'repeat(6, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(4, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 4)';
                });
                break;
        }

        if (scrollPosition >= startScrollPosition + (24 * threshold) + fadeOutBuffer) {
            imageContainer.style.opacity = 0; 
        }
    } else {
        imageContainer.style.opacity = 0; 
    }
});



//kode som styrer text boksene om intervjuet med Bjørn fra Oslofjordens Friluftsråd
document.addEventListener("DOMContentLoaded", function() {
    const xlstorycards = document.querySelector(".XLstorycards");
    const cardHeader = document.getElementById("XLstorycardheader");
    const cardQuestions = document.querySelector(".XLstoryquestions");
    const cardAnswers = document.querySelector(".XLstoryanswers");

    const questions = [
        "Hvilke områder langs kysten ser du er mest påvirket av forurensning fra båtvrak?",
        "Hvordan påvirker båtvrak fiskebestand?",
        "Hvordan påvirker båtvrak marine økosystemer, spesielt med tanke på mattrygghet?",
        "Finnes det målinger som viser forskjell i vannkvalitet og marine økosystemer før og etter fjerning av båtvrak fra et område?"
    ];
    const answers = [
        "Jeg opererer helt fra Halden, via Oslo Aker brygge, til Larvik. Her er det mange hus og leiligheter, og dermed også båter og vrak. Folk setter ofte fra seg båtene der det er lite innsyn, og de blir glemt eller etterlatt.",
        "Vi har ingen målinger av stoffene som avgis, men vi vet at båtvrak slipper ut PFAS, kvikksølv, kobber og andre giftige eller hormonforstyrrende stoffer. Disse kan være dødelige eller redusere forplantningsevnen til fisk og andre organismer.",
        "Båtvrak slipper ut mikro- og nanoplast som forurenser marine planter og dyr, og kan forårsake sykdommer. Forskning fra Nederland viser at nanoplast finnes i menneskeblod, noe som reiser spørsmål om helseeffekter.",
        "Visuelle observasjoner viser store forskjeller. I Ferder nasjonalpark har frodige økosystemer blitt til øde ørkener på grunn av båtens bunnstoff. Vi mangler fortsatt omfattende forskningsdata, men bunnstoff og nanoplast er kjent for å påvirke miljøet."
    ];

    
    const start = 18800; //starttid skal være det samme som når bakgrunnsbilde endres til bjorn1. 
    const end = 20700;

    function showCardContent(index) {
        if (index < questions.length) {
            cardQuestions.textContent = questions[index];
            cardAnswers.textContent = answers[index];
        }
    }

    window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;

        if (scrollY >= start && scrollY < end) {
            xlstorycards.style.display = 'block';
            xlstorycards.style.opacity = '1';

            const index = Math.floor((scrollY - start) / 400);  

            if (index < questions.length) {
                showCardContent(index);
            }
        } else {
            xlstorycards.style.display = 'none';
            xlstorycards.style.opacity = '0';
        }
    });
});


document.addEventListener("DOMContentLoaded", function() {
    const xlstorycards2 = document.querySelector(".XLstorycards2");
    const cardContent = document.querySelector(".XLstorycardcontent2 p");

    const paragraphs = [
        "Forurensningsrådgiveren i Sarpsborg kommune Maylinn Dramstad, og miljøkrimkoordinator Anne Elisabeth er også meget bekymret.",
        "Når båter synker, lekker de farlige kjemikalier som olje, kobber og mikroplast, forklarer Maylinn. Disse stoffene påvirker hele økosystemet. Skjell og fisk dør, og vannet blir utrygt for både bading og fiske.",
        "Anne Elisabeth, miljøkrimkoordinator, utdyper: Fritidsbåter regnes som farlig avfall, men det finnes ingen nasjonalt båtregister. Det betyr at eiere kan dumpe båtene sine uten å bli stilt til ansvar. Resultatet er en langsom forgiftning av havet, som til slutt påvirker oss alle.",
        "Når båtene synker, begynner en prosess som kan vare i flere tiår. Mikroplast og giftstoffer sprer seg i vannet og akkumuleres i livet i havet. Disse stoffene finner veien inn i fisken vi spiser, i skjellene vi plukker, og i verste fall i drikkevannet vårt, sier Anne Elisabeth. Konsekvensene er dyptgripende og langvarige."
    ];

    const start = 20900;
    const end = 22700;
    const interval = 800;

    function showParagraphContent(index) {
        if (index < paragraphs.length) {
            cardContent.textContent = paragraphs[index];
            xlstorycards2.style.opacity = '1';
        }
    }

    window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;

        if (scrollY >= start && scrollY < end) {
            xlstorycards2.style.display = 'block';
            xlstorycards2.style.opacity = '1';

            const index = Math.floor((scrollY - start) / interval);
            showParagraphContent(index);
        } else {
            xlstorycards2.style.opacity = '0';
            setTimeout(() => {
                xlstorycards2.style.display = 'none';
            }, 500);
        }
    });
});



    </script>

</body>
</html>









