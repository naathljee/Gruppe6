<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HistorieStor1</title>
    <link rel="stylesheet" href="styles.css" >
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
    <script src="DarkMode.js" defer></script>
</head>
<body class="container-xlstory">
    <header class="head-xlstory">
        <a href="index.html"><img src="img/ERA.png" alt="Placeholder image" class="xlstory-img"></a>
    </header>
    <main class="xlstory-main">

      
        <div class="xlstory-startcontent-background-image" id="background-image"></div>
        <div class="xlstory-startcontent">
            <h1>Når ansvarsfraskrivelse forurenser.</h1>
         </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p>Ifølge båtlivsundersøkelsen fra 2023 er det 1.067.000 båter i Norge.</p>
            </div>
       
            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p> Miljødirektoratet har opplyst at fra 2017 og fram til i dag, så blir det årlig innlevert mellom 10 000 og 14 000 båter lovlig til avfallsanlegget. </p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p>Mange følger reglene og tar ansvar.</p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
         <p>Men, i følge det kongelige norske båtforbundet er det estimert at rundt 5000 fritidsbåter blir ulovlig senket hvert år.</p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-imagecollage" id="imagecollagexl">
                <img src="img/XL/collage/image1.jpg" alt="bilde 1" class="visible">
            </div>

            <div style="height: 6000px;"></div>

            <div class="xlstory-starttext">
         <p>Dette er 0,1 % av alle vrakbåtene i Norge. Tenk deg resten.</p>
            </div>

            <div style="height: 800px;"></div>

            <div class="xlstory-starttext">
                <p>Oslofjordens Friluftsråd er en organisasjon som henter båtvrak.</p> 
                <div class="XLstoryvideo" id="background-image">
                  <video class="XLstoryvideo-vid" id="background-video" muted autoplay loop>
                    <source src="img/XL/Oslofjordens-Friluftsråd-lekter.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              

                

            <div style="height: 800px;"></div>

            <div class="XLstorycards">
                <h2>Bjørn Heidenstrøm jobber i Oslofjordens Friluftsråd.</h2>
                <div class="XLstorycardcontent">
                  <div class="XLstorycardimage">
                    <img src="img/XL/bjorn1.jpg" alt="Beskrivelse av bildet">
                    <img src="img/XL/bjorn2.jpg" alt="Beskrivelse av bildet">
                  </div>
                  <div class="XLstorycardtext">
                    <p class="XLstoryquestions">Hvilke områder langs kysten ser du er mest påvirket av forurensning fra båtvrak?</p>
                    <p class="XLstoryanswers">Jeg opererer helt fra Halden, helt inn til Oslo Aker brygge, så videre til ned til Larvik, den gamle definisjonen av Oslofjorden. På dette strekket hvor det er veldig mye hus og leilighets befolkning, så er det jo båter, og derfor vrakbåter. Der hvor folk finner ut av det ikke er mye, skal vi kalle det innsyn, der tenker de at her kan jeg legge båten min gratis. Så glemmer de båten sin, eller blir syke, eller gamle og dør. Andre vil ikke bruke masse penger for å levere båten sin, så de bare setter båten borti de området der med lite innsyn. </p>
                    <p class="XLstoryquestions">Hhvordan påvirker båtvrak fiskebestand?</p>
                    <p class="XLstoryanswers"></p>
                    <p class="XLstoryquestions">Hvordan påvirker båtvrak marine økosystemer, spesielt med tanke på Mattrygghet?</p>
                    <p class="XLstoryanswers"></p>
                  </div>
                </div>
              </div>
              
              
           
    </main>

    
    <script>

 //Gjør så ERA logoen forsvinner etter 35 pixler scroling
let lastScrollTop = 0;
    window.addEventListener('scroll', function() {
        let header = document.querySelector('.head-xlstory');
        let st = window.pageYOffset || document.documentElement.scrollTop;
        if (st > lastScrollTop && st > 35) {
            header.style.top = '-150px';
        } else {
            header.style.top = '0';
        }
        lastScrollTop = st <= 0 ? 0 : st;
    });

    //Endre bakgrunnsbilde i starten av story`n
    window.addEventListener('scroll', function () {
    const backgroundImage = document.getElementById('background-image');
    const backgroundVideo = document.getElementById('background-video');

    if (window.scrollY > 16400) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside3.jpg')";
        backgroundVideo.style.display = 'none';
    } else if (window.scrollY > 14200) {
        backgroundImage.style.backgroundImage = 'none'; 
        backgroundVideo.style.display = 'block'; 
    } else if (window.scrollY > 250) {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside2.jpg')";
        backgroundVideo.style.display = 'none'; 
    } else {
        backgroundImage.style.backgroundImage = "url('img/XL/XLforside.jpg')";
        backgroundVideo.style.display = 'none'; 
    }
});





//Gjør så bilde collagen vises etter 7100px
const imageContainer = document.getElementById('imagecollagexl');
const imagePaths = [
    'img/XL/collage/image1.jpg',
    'img/XL/collage/image2.jpg',
    'img/XL/collage/image3.jpg',
    'img/XL/collage/image4.jpg',
    'img/XL/collage/image5.jpg',
    'img/XL/collage/image6.jpg',
    'img/XL/collage/image7.jpg',
    'img/XL/collage/image8.jpg',
    'img/XL/collage/image9.jpg',
    'img/XL/collage/image10.jpg',
    'img/XL/collage/image11.jpg',
    'img/XL/collage/image12.jpg',
    'img/XL/collage/image13.jpg',
    'img/XL/collage/image14.jpg',
    'img/XL/collage/image15.jpg',
    'img/XL/collage/image16.jpg',
    'img/XL/collage/image17.jpg',
    'img/XL/collage/image18.jpg',
    'img/XL/collage/image19.jpg',
    'img/XL/collage/image20.jpg',
    'img/XL/collage/image21.jpg',
    'img/XL/collage/image22.jpg',
    'img/XL/collage/image23.jpg',
    'img/XL/collage/image24.jpg',
];

let startScrollPosition = 7100; 
const threshold = 200; 
const fadeOutBuffer = 1000; 



const updateStartScrollPosition = () => {
    if (window.innerWidth < 450) {
        startScrollPosition = 8100; //Blir ikke brukt, gammel kode som skulle endre startscrolposition for koden fra 7100 for datamaskiner til 8100 for mobiler forgrunna media queries. 
        console.log(`Adjusted for small screen width: ${window.innerWidth}px, new startScrollPosition: ${startScrollPosition}`);
    } else {
        startScrollPosition = 7100; 
        console.log(`Screen width is sufficient: ${window.innerWidth}px, startScrollPosition remains: ${startScrollPosition}`);
    }
};


updateStartScrollPosition();


window.addEventListener('resize', updateStartScrollPosition);

let loadedImages = [];


for (let i = 0; i < imagePaths.length; i++) {
    const img = new Image();
    img.src = imagePaths[i];
    loadedImages.push(img);
}

window.addEventListener('scroll', () => {
    const scrollPosition = window.scrollY || document.documentElement.scrollTop;
    console.log(`Scroll Position: ${scrollPosition}`);
    console.log(`Start Scroll Position: ${startScrollPosition}`);

    if (scrollPosition >= startScrollPosition) {
        imageContainer.style.opacity = 1; 

        const imagesToShow = Math.min(Math.floor((scrollPosition - startScrollPosition) / threshold) + 1, imagePaths.length);
        console.log(`Images to Show: ${imagesToShow}`);

        imageContainer.innerHTML = '';
        for (let i = 0; i < imagesToShow; i++) {
            const img = loadedImages[i].cloneNode();
            img.classList.add('visible');
            imageContainer.appendChild(img);
        }

        
        switch (true) {
            case (imagesToShow === 1):
                imageContainer.style.gridTemplateColumns = '1fr';
                imageContainer.style.gridTemplateRows = '1fr';
                break;
            case (imagesToShow <= 3):
                imageContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';
                imageContainer.style.gridTemplateRows = '1fr';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh)';
                });
                break;
            case (imagesToShow <= 6):
                imageContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(2, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 2)';
                });
                break;
            case (imagesToShow <= 9):
                imageContainer.style.gridTemplateColumns = 'repeat(3, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 12):
                imageContainer.style.gridTemplateColumns = 'repeat(4, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 15):
                imageContainer.style.gridTemplateColumns = 'repeat(5, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 18):
                imageContainer.style.gridTemplateColumns = 'repeat(6, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 21):
                imageContainer.style.gridTemplateColumns = 'repeat(7, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(3, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 3)';
                });
                break;
            case (imagesToShow <= 24):
                imageContainer.style.gridTemplateColumns = 'repeat(6, 1fr)';
                imageContainer.style.gridTemplateRows = 'repeat(4, 1fr)';
                imageContainer.querySelectorAll('img').forEach(img => {
                    img.style.width = '100%';
                    img.style.height = 'calc(100vh / 4)';
                });
                break;
        }

        if (scrollPosition >= startScrollPosition + (24 * threshold) + fadeOutBuffer) {
            imageContainer.style.opacity = 0; 
        }
    } else {
        imageContainer.style.opacity = 0; 
    }
});

        
    </script>

</body>
</html>









