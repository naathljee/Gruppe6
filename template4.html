<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HistorieLiten14</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body class="container-HistorieLiten3">
    <header class="head-HistorieLiten2">
        <a href="index.html"><img src="img/ERA.png" alt="ERA logo" class="logoHistorieLiten2-img"></a>
    </header>
    <main class="HistorieLiten3-main">
        
        
        
        
        
        <div id="story3graph" class="story3graph" style="width:100%;max-width:700px"></div>
      
      
      
      
        <div style="height: 8000px;"></div>






    </main>
    <script>
        //Gjør så ERA logoen forsvinner etter 35 pixler scroling
        let lastScrollTop = 0;
        window.addEventListener('scroll', function() {
            let header = document.querySelector('.head-HistorieLiten2');
            let st = window.pageYOffset || document.documentElement.scrollTop;

            if (st > 15) {
                header.classList.add('hide-header');
            } else {
                header.classList.remove('hide-header');
            }

            lastScrollTop = st <= 0 ? 0 : st;
        });

        //Script som viser graf
        const xArray = [1447200, 34732800, 1041984000, 3125952000];
        const yArray = ["Per time", "Per døgn", "Per måned ", "For tre måneder"];
        const config = { responsive: true, staticPlot: true };

        const data = [{
            x: xArray,
            y: yArray,
            type: "bar",
            orientation: "h",
            marker: { color: "rgba(255,0,0,0.6)" }
        }];

        const layout = {
            title: "Kloakkutslipp i liter",
            paper_bgcolor: "#ddd",
            plot_bgcolor: "rgba(0,0,0,0)",
            xaxis: { showgrid: false, title: "Liter" },
            yaxis: { showgrid: false }
        };

        Plotly.newPlot("story3graph", data, layout, config);

        // Setter initial opacity til 0
        window.addEventListener('load', function() {
            const graph = document.getElementById('story3graph');
            graph.style.opacity = '0';
        });

        const start = 3000;  // Start animasjon
        const end = 4000;    // End animasjon

        // Script for å gjøre grafen fixed mellom start og end scrolling, med fade effekt
        window.addEventListener('scroll', function() {
            const graph = document.getElementById('story3graph');
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (scrollTop >= start && scrollTop <= end) {
                graph.style.position = 'fixed';
                graph.style.top = '10px';  
                graph.style.opacity = '1';  
                graph.style.transition = 'opacity 0.5s';  
            } else {
                graph.style.position = 'relative';
                graph.style.top = '0px';
                graph.style.opacity = '0';  
                graph.style.transition = 'opacity 0.5s';  
            }
        });
    </script>
</body>
</html>
